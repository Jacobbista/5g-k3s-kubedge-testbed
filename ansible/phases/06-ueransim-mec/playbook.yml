---
# PHASE 6: UERANSIM & MEC SETUP
# Deploy simulated RAN (gNB + UE) and optional MEC application

- name: "PHASE 6 | Infrastructure Setup"
  hosts: masters,workers,edges
  become: yes
  tags:
    - phase6
    - infrastructure_setup
    - infra
  vars_files:
    - vars/topology.yml
  roles:
    - roles/infrastructure_setup

- name: "PHASE 6 | Deploy gNB (simulated base station)"
  hosts: masters
  become: no
  tags:
    - phase6
    - gnb_deployment
    - gnb
  vars_files:
    - vars/topology.yml
  roles:
    - roles/gnb_deployment

- name: "PHASE 6 | Sync gNB Endpoints (DNS)"
  hosts: masters
  become: no
  tags:
    - phase6
    - endpoints_sync
  roles:
    - roles/endpoints_sync

- name: "PHASE 6 | Deploy UE (simulated user equipment)"
  hosts: masters
  become: no
  tags:
    - phase6
    - ue_deployment
    - ue
  vars_files:
    - vars/topology.yml
  roles:
    - roles/ue_deployment

- name: "PHASE 6 | Validate Connectivity"
  hosts: masters
  become: no
  tags:
    - phase6
    - connectivity_validation
    - validation
  vars_files:
    - vars/topology.yml
  roles:
    - roles/connectivity_validation

- name: "PHASE 6 | Deploy MEC Application (optional)"
  hosts: masters
  become: no
  tags:
    - phase6
    - mec_deployment
    - mec
  vars_files:
    - vars/topology.yml
  roles:
    - roles/mec_deployment
