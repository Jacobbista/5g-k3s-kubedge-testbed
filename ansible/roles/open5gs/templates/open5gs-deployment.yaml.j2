apiVersion: apps/v1
kind: Deployment
metadata:
  name: mongodb
  namespace: open5gs
spec:
  replicas: 1
  selector:
    matchLabels:
      app: mongodb
  template:
    metadata:
      labels:
        app: mongodb
    spec:
      containers:
      - name: mongodb
        image: mongo:4.4
        ports:
        - containerPort: 27017
        volumeMounts:
        - name: mongodb-config
          mountPath: /etc/mongo
      volumes:
      - name: mongodb-config
        configMap:
          name: mongodb-config
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: mme
  namespace: open5gs
spec:
  replicas: 1
  selector:
    matchLabels:
      app: mme
  template:
    metadata:
      labels:
        app: mme
    spec:
      containers:
      - name: mme
        image: open5gs/mme:latest
        ports:
        - containerPort: 36412
        - containerPort: 2123
        - containerPort: 3868
        volumeMounts:
        - name: mme-config
          mountPath: /etc/open5gs
      volumes:
      - name: mme-config
        configMap:
          name: open5gs-config
          items:
          - key: mme.yaml
            path: mme.yaml
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: sgwc
  namespace: open5gs
spec:
  replicas: 1
  selector:
    matchLabels:
      app: sgwc
  template:
    metadata:
      labels:
        app: sgwc
    spec:
      containers:
      - name: sgwc
        image: open5gs/sgwc:latest
        ports:
        - containerPort: 2123
        - containerPort: 2152
        volumeMounts:
        - name: sgwc-config
          mountPath: /etc/open5gs
      volumes:
      - name: sgwc-config
        configMap:
          name: open5gs-config
          items:
          - key: sgwc.yaml
            path: sgwc.yaml
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: sgwu
  namespace: open5gs
spec:
  replicas: 1
  selector:
    matchLabels:
      app: sgwu
  template:
    metadata:
      labels:
        app: sgwu
    spec:
      containers:
      - name: sgwu
        image: open5gs/sgwu:latest
        ports:
        - containerPort: 2152
        volumeMounts:
        - name: sgwu-config
          mountPath: /etc/open5gs
      volumes:
      - name: sgwu-config
        configMap:
          name: open5gs-config
          items:
          - key: sgwu.yaml
            path: sgwu.yaml
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: upf
  namespace: open5gs
spec:
  replicas: 1
  selector:
    matchLabels:
      app: upf
  template:
    metadata:
      labels:
        app: upf
    spec:
      containers:
      - name: upf
        image: open5gs/upf:latest
        ports:
        - containerPort: 2152
        volumeMounts:
        - name: upf-config
          mountPath: /etc/open5gs
      volumes:
      - name: upf-config
        configMap:
          name: open5gs-config
          items:
          - key: upf.yaml
            path: upf.yaml
